compilerflasher=function(e){this.boards_list=[];this.programmers_list=[];this.selectedProgrammer=this.selectedBoard="";this.load_files=e;this.loaded_elements=[];this.minVersion="1.6.0.8";var g=this;this.eventManager=new function(){this._listeners={};this.addListener=function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]);this._listeners[a].push(b)};this.fire=function(a,b,d){"string"==typeof a&&(a={type:a});a.target||(a.target=this);if(!a.type)throw Error("Event object missing 'type' property.");
if(this._listeners[a.type]instanceof Array){a=this._listeners[a.type];for(var c=0,f=a.length;c<f;c++)"undefined"!==typeof b?"undefined"!==typeof d?a[c].call(this,b,d):a[c].call(this,b):a[c].call(this)}};this.removeListener=function(a,b){if(this._listeners[a]instanceof Array)for(var d=this._listeners[a],c=0,f=d.length;c<f;c++)if(d[c]===b){d.splice(c,1);break}}};this.setOperationOutput=function(a){$("#cb_cf_operation_output").html(a);$("#verify_modal_output").html(a);$("#flash_modal_output").html(a)};
this.on=function(a,b){this.eventManager.addListener(a,b)};this.pluginHandler=new function(){this.owner;this.serialMonitorPort=null;this.max_monitor_length=5E3;this.uuid4=function(){var c=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=(c+16*Math.random())%16|0;c=Math.floor(c/16);return("x"==a?b:b&7|8).toString(16)})};this.tabID=this.uuid4();this.currentPorts=[];this.doflashBootloader=function(c,a){document.getElementById("plugin0").flashBootloader(-1==
this.portslist.selectedIndex||"serial"!=c.communication?"":this.portslist.options[this.portslist.selectedIndex].text,c.protocol,c.communication,c.speed,c.force,c.delay,a.bootloader.high_fuses,a.bootloader.low_fuses,"undefined"===typeof a.bootloader.extended_fuses?"":a.bootloader.extended_fuses,"undefined"===typeof a.bootloader.unlock_bits?"":a.bootloader.unlock_bits,"undefined"===typeof a.bootloader.lock_bits?"":a.bootloader.lock_bits,a.build.mcu,bootloader_callback)};this.clickedPort=function(){var c=
$("#cb_cf_ports").val();url="https://codebender.cc/utilities/logdb/43/CLICK_PORT_META";url=url.replace("CLICK_PORT_META",JSON.stringify({selectedPort:c,tabID:this.tabID}));$.get(url)};this.oldPort=null;this.logPorts=function(){var c;c=null==this.oldPort?"":this.oldPort;var a;this.oldPort=a=0<this.currentPorts.length?$("#cb_cf_ports option:selected").text():"";c!=a&&(url="https://codebender.cc/utilities/logdb/38/SAVEPORTMETA",url=url.replace("SAVEPORTMETA",JSON.stringify({oldPort:c,newPort:a,tabID:this.tabID})),
$.get(url))};this.savePort=function(){var c=this;"undefined"!==typeof Lawnchair&&new Lawnchair(function(){if(0<c.currentPorts.length){var a=$("#cb_cf_ports option:selected").text();this.save({key:"port",name:a})}});c.logPorts()};this.loadPort=function(){if(0<this.currentPorts.length)if($("#cb_cf_ports").find('option[value=""]').remove(),"undefined"!==typeof Lawnchair)Lawnchair(function(){this.exists("port",function(c){c?this.get("port",function(c){0<$('#cb_cf_ports option[value="'+c.name+'"]').length?
$("#cb_cf_ports").val(c.name):(c=$("#cb_cf_ports option:first").val(),$("#cb_cf_ports").val(c))}):(c=$("#cb_cf_ports option:first").val(),$("#cb_cf_ports").val(c))})});else{var c=$("#cb_cf_ports option:first").val();$("#cb_cf_ports").val(c)}else $("#cb_cf_ports").append('<option value="">No ports detected</option>')};this.initializePlugin=function(){var c="",c="",c=void 0===typeof window.location.origin?window.location:window.location.origin;if(-1==c.indexOf("codebender.cc")||window.osBrowserIsSupported())if(this.plugin_running=
this.plugin_validated=this.plugin_initialized=this.plugin_found=this.plugin_searched=!1,this.plugin_version=null,window.plugin_version=null,this.searchPlugin(),this.plugin_found)this.runPlugin();else{$("#startupModal").modal("show");c=this.browserSpecificPluginInstall("To program your Arduino from your browser, install the Codebender Plugin. ");this.owner.setOperationOutput(c);this.owner.eventManager.fire("plugin_notification",c);c="https://codebender.cc/utilities/logdb/35/PLUGIN_META".replace("PLUGIN_META",
JSON.stringify({plugin:!1,message:"Not on navigator plugins."}));$.get(c);var a=this;window.pluginSearchInterval=setInterval(function(){a.searchPlugin();a.plugin_found&&(clearInterval(window.pluginSearchInterval),a.runPlugin())},2E3)}else c="https://codebender.cc/utilities/logdb/35/PLUGIN_META".replace("PLUGIN_META",JSON.stringify({plugin:!1,message:"Unsupported OS/browser combination."})),$.get(c),Browsers.isOs("Mac OS X")||Browsers.isOs("Windows")?(this.owner.setOperationOutput('<i class="icon-warning-sign"></i> To program your Arduino from your browser, please use <a href="http://www.google.com/chrome/" target="_blank">Google Chrome</a> or <a href="http://www.mozilla.org/en-US/firefox/" target="_blank">Mozilla Firefox</a>.'),
this.owner.eventManager.fire("plugin_notification",'<i class="icon-warning-sign"></i> To program your Arduino from your browser, please use <a href="http://www.google.com/chrome/" target="_blank">Google Chrome</a> or <a href="http://www.mozilla.org/en-US/firefox/" target="_blank">Mozilla Firefox</a>.')):Browsers.isOs("Unix")||Browsers.isOs("FreeBSD")||Browsers.isOs("OpenBSD")||Browsers.isOs("NetBSD")||Browsers.isOs("Solaris")||Browsers.isOs("Linux")||Browsers.isOs("Debian")||Browsers.isOs("Fedora")||
Browsers.isOs("Gentoo")||Browsers.isOs("gNewSense")||Browsers.isOs("Kubuntu")||Browsers.isOs("Mandriva")||Browsers.isOs("Mageia")||Browsers.isOs("Red Hat")||Browsers.isOs("Slackware")||Browsers.isOs("SUSE")||Browsers.isOs("Turbolinux")||Browsers.isOs("Ubuntu")?(this.owner.setOperationOutput('<i class="icon-warning-sign"></i> To program your Arduino from your browser, please use <a href="http://www.google.com/chrome/" target="_blank">Google Chrome (up to version 34 on Linux)</a> or <a href="http://www.mozilla.org/en-US/firefox/" target="_blank">Mozilla Firefox</a>.'),
this.owner.eventManager.fire("plugin_notification",'<i class="icon-warning-sign"></i> To program your Arduino from your browser, please use <a href="http://www.google.com/chrome/" target="_blank">Google Chrome (up to version 34 on Linux)</a> or <a href="http://www.mozilla.org/en-US/firefox/" target="_blank">Mozilla Firefox</a>.')):(this.owner.setOperationOutput('<i class="icon-warning-sign"></i> To program your Arduino from your browser, please use <a href="http://www.google.com/chrome/" target="_blank">Google Chrome</a> or <a href="http://www.mozilla.org/en-US/firefox/" target="_blank">Mozilla Firefox</a> from Windows, Mac or Linux.'),
this.owner.eventManager.fire("plugin_notification",'<i class="icon-warning-sign"></i> To program your Arduino from your browser, please use <a href="http://www.google.com/chrome/" target="_blank">Google Chrome</a> or <a href="http://www.mozilla.org/en-US/firefox/" target="_blank">Mozilla Firefox</a> from Windows, Mac or Linux.'))};this.searchPlugin=function(){for(i=0;i<navigator.plugins.length;i++)if("Codebender.cc"==navigator.plugins[i].name||"Codebendercc"==navigator.plugins[i].name)this.plugin_found=
!0;this.plugin_searched=!0};this.runPlugin=function(){url="https://codebender.cc/utilities/logdb/35/PLUGIN_META";url=url.replace("PLUGIN_META",JSON.stringify({plugin:!0,message:"Found on navigator plugins."}));$.get(url);this.owner.setOperationOutput("<i class='icon-spinner icon-spin'></i>  Initializing Plugin... Make sure that you allow plugin execution on your browser. <a href='http://codebender.uservoice.com/knowledgebase/topics/57328-plugin'>More Info</a>");this.owner.eventManager.fire("plugin_notification",
"<i class='icon-spinner icon-spin'></i>  Initializing Plugin... Make sure that you allow plugin execution on your browser. <a href='http://codebender.uservoice.com/knowledgebase/topics/57328-plugin'>More Info</a>");$("body").append('<object id="plugin0" type="application/x-codebendercc" width="0" height="0" xmlns="http://www.w3.org/1999/html"></object>');var c=this;window.plugin_init_interval=setInterval(function(){"undefined"!==typeof document.getElementById("plugin0").probeUSB&&(clearInterval(window.plugin_init_interval),
c.plugin_initialized=!0,c.plugin_version=document.getElementById("plugin0").version,window.plugin_version=c.plugin_version,url="https://codebender.cc/utilities/logdb/35/PLUGIN_META",url=url.replace("PLUGIN_META",JSON.stringify({plugin:!0,version:document.getElementById("plugin0").version})),$.get(url),c.validateVersion(g.minVersion),"undefined"!==typeof document.getElementById("plugin0").setErrorCallback&&document.getElementById("plugin0").setErrorCallback(c.plugin_error_logger),"undefined"!==typeof document.getElementById("plugin0").init&&
(document.getElementById("plugin0").init(),"undefined"!=document.getElementById("plugin0").instance_id&&(c.tabID=parseInt(document.getElementById("plugin0").instance_id))),"undefined"!==typeof document.getElementById("plugin0").closeTab?$(window).unload(function(){document.getElementById("plugin0").closeTab();document.getElementById("plugin0").deleteMap()}):c.disconnect())},100)};this.showPlugin=function(){this.owner.setOperationOutput("");this.owner.eventManager.fire("plugin_running");$.each(this.owner.loaded_elements,
function(c,a){"cb_cf_boards"!==a&&$("#"+a).removeAttr("disabled")});this.plugin_running=!0};this.parseVersionString=function(c){if("string"!=typeof c)return!1;var a=c.split(".");c=parseInt(a[0])||0;var b=parseInt(a[1])||0,d=parseInt(a[2])||0,a=parseInt(a[3])||0;return{major:c,minor:b,patch:d,build:a}};this.comparePluginVersions=function(c,a){var b=c.major-a.major,d=c.minor-a.minor,e=c.patch-a.patch;return 0!=b?b:0!=d?d:0!=e?e:c.build-a.build};this.validateVersion=function(c){0>this.comparePluginVersions(this.parseVersionString(document.getElementById("plugin0").version),
this.parseVersionString(c))?(c=this.browserSpecificPluginInstall("You need to update the Codebender Plugin. "),this.owner.setOperationOutput(c),this.owner.eventManager.fire("plugin_notification",c),url="https://codebender.cc/utilities/logdb/27/PLUGIN_META",url=url.replace("PLUGIN_META",JSON.stringify({success:!0,plugin:!1,alert:"You need to update the Codebender Plugin."})),$.get(url),clearInterval(window.PluginLoggingInterval)):null==document.getElementById("plugin0").version?(c=this.browserSpecificPluginInstall("To program your Arduino from your browser, install the Codebender Plugin. "),
this.owner.setOperationOutput(c),this.owner.eventManager.fire("plugin_notification",c),url="https://codebender.cc/utilities/logdb/27/PLUGIN_META",url=url.replace("PLUGIN_META",JSON.stringify({success:!0,plugin:!1,alert:"To program your Arduino from your browser, install the Codebender Plugin."})),$.get(url),clearInterval(window.PluginLoggingInterval)):(this.enableUSB(),this.initializePluginPortsLogger(),this.showPlugin());this.plugin_validated=!0};this.initializePluginPortsLogger=function(){"undefined"===
typeof portsAvail&&(portsAvail=[""]);window.oldPortsAvail=portsAvail;"undefined"===typeof serialPortsAvail&&(serialPortsAvail=[""]);window.oldSerialPortsAvail=serialPortsAvail;var c=this;window.PluginLoggingInterval=setInterval(function(){try{if("undefined"===typeof document.getElementById("plugin0").probeUSB)b="https://codebender.cc/utilities/logdb/34/PLUGIN_META",b=b.replace("PLUGIN_META",JSON.stringify({message:"Non catchable plugin crash.",version:"undefined"===window.plugin_version||null===window.plugin_version?
"undefined":window.plugin_version,OS:{name:"undefined"===typeof Browsers.os.name?"undefined":Browsers.os.name,url:window.location.pathname,version:null==Browsers.os.version||"undefined"===typeof Browsers.os.version.original?"undefined":Browsers.os.version.original},Browser:{name:"undefined"===typeof Browsers.browser.name?"undefined":Browsers.browser.name,version:"undefined"===typeof Browsers.browser.version||null==Browsers.browser.version?"undefined":Browsers.browser.version.original}})),$.get(b),
clearInterval(window.PluginLoggingInterval);else{if("undefined"===typeof document.getElementById("plugin0").availablePorts&&(oldPortsAvail.length<portsAvail.length||1==oldPortsAvail.length&&1==portsAvail.length&&""==oldPortsAvail[0]&&""!=portsAvail[0]||oldPortsAvail.length>portsAvail.length||1==oldPortsAvail.length&&1==portsAvail.length&&""!=oldPortsAvail[0]&&""==portsAvail[0])){var a={};$("#cb_cf_ports  > option").each(function(c){a[c]=this.text});var b="https://codebender.cc/utilities/logdb/36/PLUGIN_META",
b=b.replace("PLUGIN_META",JSON.stringify({success:!0,plugin:!0,version:document.getElementById("plugin0").version,ports:a}));$.get(b)}oldPortsAvail=portsAvail;if("undefined"!==typeof document.getElementById("plugin0").getPorts){serialPortsAvail=document.getElementById("plugin0").getPorts();if(oldSerialPortsAvail!=serialPortsAvail){var d=$.parseJSON(serialPortsAvail),a="";$.each(d,function(c,b){a+=b.port+","});b="https://codebender.cc/utilities/logdb/36/PLUGIN_META";b=b.replace("PLUGIN_META",JSON.stringify({success:!0,
plugin:!0,version:document.getElementById("plugin0").version,tabID:c.tabID,serialLibPorts:a,probeUSBports:document.getElementById("plugin0").probeUSB()}));$.get(b);b="https://codebender.cc/utilities/logdb/74/PLUGIN_META";b=b.replace("PLUGIN_META",JSON.stringify({success:!0,plugin:!0,version:document.getElementById("plugin0").version,tabID:c.tabID,jsonPorts:d}));$.get(b)}oldSerialPortsAvail=serialPortsAvail}}}catch(e){b="https://codebender.cc/utilities/logdb/27/PLUGIN_META".replace("PLUGIN_META",JSON.stringify({success:!1,
error:e})),$.get(b)}},500)};this.canBurnBootloader=function(c){return"undefined"===typeof this.portslist.options[this.portslist.selectedIndex]&&"serial"==c.communication?!1:!0};this.doflash=function(c,a,b,d,e){1==c&&"undefined"!==typeof a.upload.protocol?"undefined"===typeof this.portslist.options[this.portslist.selectedIndex]?(this.owner.eventManager.fire("flash_failed","Could not connect to selected port. Make sure your board is properly connected."),this.owner.setOperationOutput("Could not connect to selected port. Make sure your board is properly connected.")):
(b="undefined"===typeof a.upload.disable_flushing?"":a.upload.disable_flushing,document.getElementById("plugin0").flash(this.portslist.options[this.portslist.selectedIndex].text,d,a.upload.maximum_size,a.upload.protocol,b,a.upload.speed,a.build.mcu,e)):"undefined"==typeof b?(this.owner.setOperationOutput("The selected device needs a programmer, and none was selected. Operation Aborted."),this.owner.eventManager.fire("flash_failed","Could not connect to selected port. Make sure your board is properly connected.")):
(c="undefined"===typeof this.portslist.options[this.portslist.selectedIndex]?"":this.portslist.options[this.portslist.selectedIndex].text,document.getElementById("plugin0").flashWithProgrammer(c,d,a.upload.maximum_size,b.protocol,b.communication,b.speed,b.force,b.delay,a.build.mcu,e))};this.canflash=function(a,b,d){if("serial"==b.communication&&0==this.currentPorts.length)return!1;d=d||!1;return null!=$("#cb_cf_ports").val()&&""!=$("#cb_cf_ports").val()||(null==$("#cb_cf_ports").val()||""==$("#cb_cf_ports").val())&&
"undefined"===typeof a.upload.protocol||d?"undefined"!==typeof this.portslist.options[this.portslist.selectedIndex]||"serial"!=b.communication||"undefined"!==typeof a.upload.protocol&&!d?!0:!1:!1};this.browserSpecificPluginInstall=function(a){-1==(void 0===typeof window.location.origin?window.location:window.location.origin).indexOf("codebender.cc")?a+='<a target="_blank" href = "https://codebender.cc/static/plugin" >Learn more.</a>':Browsers.isBrowser("Chrome")||Browsers.isBrowser("Chromium")?a=
Browsers.isOs("Windows",">=","6.2")?a+'<a onclick=\'compilerflasher.pluginHandler.addTo("Windows", "//codebender.cc/Codebendercc.msi")\' id="msi-download-url" href = "javascript:void(0);" >Add to Windows.</a>':a+"<a onclick='compilerflasher.pluginHandler.addTo(\"Chrome\")' href='https://chrome.google.com/webstore/detail/codebendercc-extension/fkjidelplakiboijmadcpcbpboihkmee' target='_blank'>Add to Chrome</a>":Browsers.isBrowser("Firefox")&&(a+='<a onclick=\'compilerflasher.pluginHandler.addTo("Firefox", "//codebender.cc/codebender.xpi")\' id="xpi-download-url" href = "javascript:void(0);" >Add to Firefox.</a>');
return a};this.addTo=function(a,b){url="https://codebender.cc/utilities/logdb/45/ADD_TO_META";url=url.replace("ADD_TO_META",JSON.stringify({where:a}));"undefined"===typeof b?$.get(url):$.get(url).done(function(){window.location.replace(b)})};this.enableUSB=function(){this.connected=!1;this.serialMonitorToAppend=this.serialMonitorVal="";this.portslist=$("#cb_cf_ports")[0];this.oldPorts=null;var a=this;setTimeout(function(){a.scan()},200);setTimeout(function(){a.loadPort()},500)};this.getFire=function(){try{var a=
"";if("undefined"!==typeof document.getElementById("plugin0").getPorts){var b=$.parseJSON(document.getElementById("plugin0").getPorts());$.each(b,function(d,e){a+=e.port;d!=Object.keys(b).length-1&&(a+=",")})}else a=document.getElementById("plugin0").probeUSB();null==this.oldPorts&&(this.logPorts(),this.oldPorts="");if(a!=this.oldPorts){$("#cb_cf_ports").find("option").remove();portsAvail=a.split(",");this.currentPorts=[];for(var d=0;d<portsAvail.length;d++)""!=portsAvail[d]&&(this.portslist.options[d]=
new Option(portsAvail[d],portsAvail[d],!0,!1),this.currentPorts.push(portsAvail[d]));this.oldPorts=a;this.loadPort();this.logPorts()}}catch(e){$("#cb_cf_ports").find("option").remove(),this.oldPorts=a}};this.scan=function(){window.hasPerm=document.getElementById("plugin0").setCallback(function(a,c){"disconnect"==c?compilerflasher.pluginHandler.disconnect(!0):(compilerflasher.eventManager.fire("plugin_notification",c),compilerflasher.setOperationOutput(c))});window.hasPerm||(compilerflasher.setOperationOutput("You need to grant permissions to the Codebender extension."),
compilerflasher.eventManager.fire("plugin_notification","You need to grant permissions to the Codebender extension."));this.getFire();var a=this;this.getFireInterval=setInterval(function(){a.getFire()},1E3)};this.show_alert=function(a,b){alertElement="<div id='";alertElement+=b;alertElement+="' class='alert'>";alertElement+=a;alertElement+="</div>";$("#cb_cf_ports_div .alert").hide(100).remove();$("#cb_cf_ports_div").prepend(alertElement)};var a=new SmoothieChart({scaleSmoothing:.605,maxValue:1024,
minValue:0});a.streamTo(document.getElementById("mycanvas"),1E3);var b=new TimeSeries,d=this;this.connect=function(){speed=$("#cb_cf_baud_rates option:selected").val();if(0==this.connected){var c;c="https://codebender.cc/utilities/logdb/18/SERIAL_MONITOR_META".replace("SERIAL_MONITOR_META",JSON.stringify({baudrate:speed,port:$("#cb_cf_ports").val(),tabID:this.tabID}));$.get(c);if(null!=$("#cb_cf_ports").val()&&""!=$("#cb_cf_ports").val()){d.serialMonitorPort=$("#cb_cf_ports").val();$("#serial_monitor_content").show(1E3);
this.connected=!0;var f=this;$("#serial_disconnect").click(function(){f.disconnect()});var f=this,e=this.portslist.options[this.portslist.selectedIndex].text;document.getElementById("plugin0").serialRead(this.portslist.options[this.portslist.selectedIndex].text,speed,function(a,c){f.serialHudAppendString(c)},function(a,c){var b;b="https://codebender.cc/utilities/logdb/69/PLUGIN_SERIAL_MONITOR_RETVAL_META".replace("PLUGIN_SERIAL_MONITOR_RETVAL_META",JSON.stringify({retVal:c,version:"undefined"===window.plugin_version||
null===window.plugin_version?"undefined":window.plugin_version,url:window.location.pathname,OS:{name:"undefined"===typeof Browsers.os.name?"undefined":Browsers.os.name,version:null==Browsers.os.version||"undefined"===typeof Browsers.os.version.original?"undefined":Browsers.os.version.original},Browser:{name:"undefined"===typeof Browsers.browser.name?"undefined":Browsers.browser.name,version:"undefined"===typeof Browsers.browser.version||null==Browsers.browser.version?"undefined":Browsers.browser.version.original}}));
$.get(b);b=compilerflasher.getFlashFailMessage(c);compilerflasher.setOperationOutput(b);compilerflasher.eventManager.fire("plugin_notification",b)});this.serialMonitorVal=this.serialMonitorToAppend="";f=this;a.addTimeSeries(b);var g=0;window.serialMonitorUpdater=setInterval(function(){if(""!=f.serialMonitorToAppend){var a=f.serialMonitorToAppend.length+f.serialMonitorVal.length;a>f.max_monitor_length?(f.serialMonitorVal=f.serialMonitorVal.substring(a-f.max_monitor_length)+f.serialMonitorToAppend,
$("#serial_hud").html(document.createTextNode(f.serialMonitorVal))):(f.serialMonitorVal+=f.serialMonitorToAppend,$("#serial_hud").append(document.createTextNode(f.serialMonitorToAppend)));$("#textarea_serialTest").html(document.createTextNode(f.serialMonitorToAppend));f.serialMonitorToAppend="";g=document.createTextNode(f.serialMonitorToAppend);$("#autoscroll_check").is(":checked");$("#serial_hud").scrollTo(99999999)}setInterval(function(){""!=f.serialMonitorToAppend?b.append((new Date).getTime(),
f.serialMonitorToAppend):b.append((new Date).getTime(),g)},1E3)},50);if("undefined"!==typeof document.getElementById("plugin0").availablePorts){var h=this;window.portValidatorInterval=setInterval(function(){ports=document.getElementById("plugin0").availablePorts();-1==ports.indexOf(e)&&(clearInterval(window.portValidatorInterval),h.disconnect(!1))},100)}}else this.owner.setOperationOutput("Please select a valid port!!"),this.owner.eventManager.fire("plugin_notification","Please select a valid port!!")}else this.disconnect()};
this.disconnect=function(a){b.data=[];a=a||!1;if(1==this.connected){if(0==a){var f;f="https://codebender.cc/utilities/logdb/59/SERIAL_MONITOR_DISC_META".replace("SERIAL_MONITOR_DISC_META",JSON.stringify({baudrate:$("#cb_cf_baud_rates option:selected").val(),port:d.serialMonitorPort,tabID:this.tabID}));$.get(f)}d.serialMonitorPort=null;"undefined"!==typeof document.getElementById("plugin0").availablePorts&&clearInterval(window.portValidatorInterval);var e=this;$("#cb_cf_serial_monitor_connect").html("<i class='icon-list-alt'></i>").unbind("click").click(function(){e.connect()});
this.connected=!1;$("#cb_cf_serial_monitor_connect").attr("disabled","disabled");setTimeout(function(){g.serial_monitor_disabled||$("#cb_cf_serial_monitor_connect").removeAttr("disabled")},3E3);$("#serial_monitor_content").hide(1E3);clearInterval(window.serialMonitorUpdater);a||document.getElementById("plugin0").serialMonitorSetStatus()}};this.serialHudAppendString=function(a){-1!==a.indexOf("\r\n")&&(a=a.replace("\r\n","\n"));-1!==a.indexOf("\r")&&(a=a.replace("\r",""));var b=this.serialMonitorToAppend.length+
a.length;this.serialMonitorToAppend=b>this.max_monitor_length?this.serialMonitorToAppend.substring(b-this.max_monitor_length)+a:this.serialMonitorToAppend+a};this.serialHudAppend=function(a){isNaN(a)?serialHudWrite($("#serial_hud").html()+a+"<br>"):"13"!=a&&("10"==a&&serialHudWrite($("#serial_hud").html()+"<br>"),"10"!=a&&serialHudWrite($("#serial_hud").html()+String.fromCharCode(a)))};this.serialHudWrite=function(a){500<$("#serial_hud").find("br").length?$("#serial_hud").html(a.substring(a.indexOf("<br>")+
4)):$("#serial_hud").html().length>this.max_monitor_length?$("#serial_hud").html(a.substring($("#serial_hud").html().length-this.max_monitor_length)):$("#serial_hud").html(a);$("#autoscroll_check").is(":checked")&&$("#serial_hud").scrollTo(99999999)};this.serialSendOnEnter=function(a){a=a||window.event;"13"==a.keyCode?this.serialSend():"10"==a.keyCode&&this.serialSend()};this.serialSend=function(){"1.6.0.8">=document.getElementById("plugin0").version?document.getElementById("plugin0").serialWrite($("#text2send").val()):
document.getElementById("plugin0").serialWrite($("#text2send").val(),this.serialMonitorPort)};d=this;this.plugin_error_logger=function(a,b,e){"undefined"==typeof e||0==e?(a="https://codebender.cc/utilities/logdb/34/PLUGIN_ERROR_META".replace("PLUGIN_ERROR_META",JSON.stringify({message:b,version:"undefined"===window.plugin_version||null===window.plugin_version?"undefined":window.plugin_version,url:window.location.pathname,tabID:d.tabID,OS:{name:"undefined"===typeof Browsers.os.name?"undefined":Browsers.os.name,
version:null==Browsers.os.version||"undefined"===typeof Browsers.os.version.original?"undefined":Browsers.os.version.original},Browser:{name:"undefined"===typeof Browsers.browser.name?"undefined":Browsers.browser.name,version:"undefined"===typeof Browsers.browser.version||null==Browsers.browser.version?"undefined":Browsers.browser.version.original}})),$.get(a)):1==e&&(a="https://codebender.cc/utilities/logdb/55/PLUGIN_WARNING_META".replace("PLUGIN_WARNING_META",JSON.stringify({message:b,version:"undefined"===
window.plugin_version||null===window.plugin_version?"undefined":window.plugin_version,url:window.location.pathname,tabID:d.tabID,OS:{name:"undefined"===typeof Browsers.os.name?"undefined":Browsers.os.name,version:null==Browsers.os.version||"undefined"===typeof Browsers.os.version.original?"undefined":Browsers.os.version.original},Browser:{name:"undefined"===typeof Browsers.browser.name?"undefined":Browsers.browser.name,version:"undefined"===typeof Browsers.browser.version||null==Browsers.browser.version?
"undefined":Browsers.browser.version.original}})),$.get(a))}};this.pluginHandler.owner=this;var h=this;0<$("#cb_cf_operation_output").length&&this.loaded_elements.push("cb_cf_operation_output");0<$("button#cb_cf_verify_btn").length&&($("#cb_cf_verify_btn").click(function(){arduinoCode();h.verify();$("#verifyModal").modal("show")}),this.loaded_elements.push("cb_cf_verify_btn"));0<$("select#cb_cf_boards").length&&($("#cb_cf_boards").append($("<option></option>").html("Loading Boards...")).attr("disabled",
"disabled").click(function(){h.clickedBoard()}).change(function(){h.saveBoard()}),$.getJSON("https://codebender.cc/board/listboards",function(a){boardsListCallback(a)}),this.loaded_elements.push("cb_cf_boards"));0<$("select#cb_cf_ports").length&&($("#cb_cf_ports").click(function(){h.pluginHandler.clickedPort()}).change(function(){h.pluginHandler.savePort()}).attr("disabled","disabled"),$("#cb_cf_ports").data().pluginVersion&&(this.pluginHandler.minVersion=$("#cb_cf_ports").data().pluginVersion),this.loaded_elements.push("cb_cf_ports"));
0<$("button#cb_cf_flash_btn").length&&($("#cb_cf_flash_btn").click(function(){$("#flashModal").modal("show");h.usbflash()}),this.loaded_elements.push("cb_cf_flash_btn"));0<$("select#cb_cf_programmers").length&&($("#cb_cf_programmers").append($("<option></option>").html("Loading Programmers...")).attr("disabled","disabled").click(function(){h.clickedProgrammer()}).change(function(){h.saveProgrammer()}),$.getJSON("https://codebender.cc/board/programmers",function(a){programmersListCallback(a)}),this.loaded_elements.push("cb_cf_programmers"));
0<$("button#cb_cf_flash_with_prog_btn").length&&($("#cb_cf_flash_with_prog_btn").click(function(){h.usbflashWithProgrammer()}).attr("disabled","disabled"),this.loaded_elements.push("cb_cf_flash_with_prog_btn"));0<$("select#cb_cf_baud_rates").length&&($("#cb_cf_baud_rates").append("<option>19200</option><option>9600</option><option>28800</option><option>38400</option><option>57600</option><option>115200</option>").attr("disabled","disabled"),this.loaded_elements.push("cb_cf_baud_rates"));0<$("button#cb_cf_serial_monitor_connect").length&&
($("#cb_cf_serial_monitor_connect").click(function(){h.pluginHandler.connect()}).attr("disabled","disabled"),this.loaded_elements.push("cb_cf_serial_monitor_connect"));0<$("#cb_cf_serial_monitor").length&&($("#cb_cf_serial_monitor").html('<div id="serial_monitor_content" style="display:none;">\n    <div class="input-append">\n        <input id="text2send" type="text" placeholder="Type a message" onkeypress="compilerflasher.pluginHandler.serialSendOnEnter(event)">\n        <button id="serial_send" onclick="compilerflasher.pluginHandler.serialSend()" class="btn" title="Send Message">Send\n        </button>\n    </div>\n    <div id="serial_monitor_hud_and_autoscroll">\n        <pre id="serial_hud" class="well" style="overflow-y:scroll"></pre>\n\n        <label class="checkbox">\n            <input id=\'autoscroll_check\' type="checkbox" checked>\n            Autoscroll\n        </label>\n    </div>\n</div>\n\n'),
this.loaded_elements.push("cb_cf_serial_monitor"));0<$("#cb_cf_burn_bootloader").length&&($("#cb_cf_burn_bootloader").click(function(){h.burn_bootloader()}).attr("disabled","disabled"),this.loaded_elements.push("cb_cf_burn_bootloader"));-1==window.location.origin.indexOf("codebender.cc")?this.pluginHandler.initializePlugin():window.osBrowserDetectionValidInterval=setInterval(function(){"undefined"!==typeof window.osBrowserIsSupported&&(clearInterval(window.osBrowserDetectionValidInterval),h.pluginHandler.initializePlugin())},
100);this.saveBoard=function(){"undefined"!==typeof Lawnchair&&new Lawnchair(function(){this.save({key:"board",name:$("#cb_cf_boards option:selected").text()})});var a=this.selectedBoard.name;this.selectedBoard=this.boards_list[$("#cb_cf_boards").prop("selectedIndex")];var b=this.selectedBoard.name;url="https://codebender.cc/utilities/logdb/37/SAVEBOARDMETA";url=url.replace("SAVEBOARDMETA",JSON.stringify({oldBoard:a,newBoard:b,tabID:this.pluginHandler.tabID}));$.get(url)};this.loadBoard=function(){var a=
this;"undefined"!==typeof Lawnchair?Lawnchair(function(){this.exists("board",function(b){b&&this.get("board",function(a){$("#cb_cf_boards").val(a.name)});a.selectedBoard=a.boards_list[$("#cb_cf_boards").prop("selectedIndex")]})}):a.selectedBoard=a.boards_list[$("#cb_cf_boards").prop("selectedIndex")]};this.getMaxSize=function(){return parseInt(this.selectedBoard.upload.maximum_size)};this.saveProgrammer=function(){"undefined"!==typeof Lawnchair&&new Lawnchair(function(){this.save({key:"programmer",
name:$("#cb_cf_programmers option:selected").text()})});var a=this.selectedProgrammer.name;this.selectedProgrammer=this.programmers_list[$("#cb_cf_programmers").prop("selectedIndex")];var b=this.selectedProgrammer.name;url="https://codebender.cc/utilities/logdb/39/SAVEPROGRAMMERMETA";url=url.replace("SAVEPROGRAMMERMETA",JSON.stringify({oldProgrammer:a,newProgrammer:b,tabID:this.pluginHandler.tabID}));$.get(url)};this.loadProgrammer=function(){var a=this;window.programmersInitInterv=setInterval(function(){a.pluginHandler.plugin_running&&
(clearInterval(window.programmersInitInterv),"undefined"!==typeof Lawnchair?Lawnchair(function(){this.exists("programmer",function(b){b&&this.get("programmer",function(a){$("#cb_cf_programmers").val(a.name)});a.selectedProgrammer=a.programmers_list[$("#cb_cf_programmers").prop("selectedIndex")]})}):a.selectedProgrammer=a.programmers_list[$("#cb_cf_programmers").prop("selectedIndex")])},60)};this.getDefaultBoard=function(){for(var a=window.location.search.substring(1).split("&"),b=0;b<a.length;b++){var d=
a[b].split("=");if("board"==d[0])return decodeURIComponent(d[1])}};this.setBoardsList=function(a){this.boards_list=a};this.getBoardsList=function(){return this.boards_list};this.clickedBoard=function(){var a=$("#cb_cf_boards option:selected").text();url="https://codebender.cc/utilities/logdb/42/CLICK_BOARD_META";url=url.replace("CLICK_BOARD_META",JSON.stringify({selectedBoard:a,tabID:this.pluginHandler.tabID}));$.get(url)};this.clickedProgrammer=function(){var a=$("#cb_cf_programmers option:selected").text();
url="https://codebender.cc/utilities/logdb/44/CLICK_PROGRAMMER_META";url=url.replace("CLICK_PROGRAMMER_META",JSON.stringify({selectedProgrammer:a,tabID:this.pluginHandler.tabID}));$.get(url)};this.generate_payload=function(a,b){b="undefined"===typeof b?!1:b;var d=this.load_files(),c=0,e=[];jQuery.each(d,function(a,b){e[c++]={filename:a,content:$("<div/>").html(b).text()+"\n"}});d=b?{files:e,logging:b,format:a,version:"105",build:compilerflasher.selectedBoard.build}:{files:e,format:a,version:"105",
build:compilerflasher.selectedBoard.build};"autocomplete"==a&&"undefined"!==typeof editor&&(d.position=editor.getSession().getSelection().selectionLead.getPosition(),d.position.file=editor.selectedFile,d.archive=!0);return JSON.stringify(d)};this.getFlashFailMessage=function(a){var b="";return b=window.flashing_errors[a]?window.flashing_errors[a]+" <a href='https://codebender.uservoice.com/knowledgebase/articles/183395-usb-flashing-known-errors' target='_blank'>More Info</a>":"An error occured while connecting to your device. Please try again."};
this.flash_callback=function(a,b){b?(msg=compilerflasher.getFlashFailMessage(b),compilerflasher.setOperationOutput(msg),compilerflasher.eventManager.fire("flash_failed",msg,b),0!=b&&(-1<b||-23>b)&&-30!=b&&-55!=b&&-56!=b&&-57!=b&&(d="/utilities/logdb/51/PLUGIN_RESULT_META".replace("PLUGIN_RESULT_META",JSON.stringify({version:document.getElementById("plugin0").version,retVal:b,flashResult:document.getElementById("plugin0").getFlashResult().substring(0,1800)})),$.get(d))):(compilerflasher.eventManager.fire("flash_succeed"),
compilerflasher.setOperationOutput("Upload successful!"));var d;d="https://codebender.cc/utilities/flash/ERROR_CODE".replace("ERROR_CODE",b+"&"+g.pluginHandler.tabID);$.get(d)};this.getHex=function(){this.eventManager.fire("pre_hex");var a=this.generate_payload("hex"),b=this;$.post("https://codebender.cc/utilities/compile/",a,function(a){try{var c=jQuery.parseJSON(a);0==c.success?(b.setOperationOutput("Verification failed."),b.eventManager.fire("hex_failed",c.message)):(b.setOperationOutput("Verification Successful!"),
b.eventManager.fire("hex_succeed",c))}catch(e){b.eventManager.fire("hex_failed",'<i class="icon-remove"></i> Unexpected error occured. Try again later.'),b.setOperationOutput('<i class="icon-remove"></i> Unexpected error occured. Try again later.')}})};this.usbflash=function(){url="https://codebender.cc/utilities/logdb/40/RUN_BUTTON_META";url=url.replace("RUN_BUTTON_META",JSON.stringify({port:$("#cb_cf_ports").val(),board:$("#cb_cf_boards option:selected").text(),programmer:$("#cb_cf_programmers option:selected").text(),
tabID:this.pluginHandler.tabID}));$.get(url);if(this.pluginHandler.canflash(this.selectedBoard,this.selectedProgrammer)){var a=this;this.eventManager.fire("pre_flash");this.setOperationOutput("<i class='icon-spinner icon-spin'> </i> Working...");this.getbin(function(b){0==b.success?(a.setOperationOutput("There was an error compiling."),a.eventManager.fire("verification_failed",b.message)):(a.eventManager.fire("mid_flash",b.size),parseInt(b.size)>a.getMaxSize()?(a.setOperationOutput("There is not enough space!"),
a.eventManager.fire("flash_failed","There is not enough space!")):1==a.pluginHandler.connected?(a.pluginHandler.disconnect(!1),setTimeout(function(){a.pluginHandler.doflash(!0,a.selectedBoard,a.selectedProgrammer,b.output,a.flash_callback)},200)):a.pluginHandler.doflash(!0,a.selectedBoard,a.selectedProgrammer,b.output,a.flash_callback))})}else $("#startupModal").modal("show"),this.setOperationOutput("Please select a valid port!"),this.eventManager.fire("plugin_notification","Please select a valid port!!")};
this.usbflashWithProgrammer=function(){url="https://codebender.cc/utilities/logdb/41/RUN_WITH_PROG_BUTTON_META";url=url.replace("RUN_WITH_PROG_BUTTON_META",JSON.stringify({port:$("#cb_cf_ports").val(),board:$("#cb_cf_boards option:selected").text(),programmer:$("#cb_cf_programmers option:selected").text(),tabID:this.pluginHandler.tabID}));$.get(url);if(this.pluginHandler.canflash(this.selectedBoard,this.selectedProgrammer,!0)){var a=this;this.eventManager.fire("pre_flash");this.setOperationOutput("<i class='icon-spinner icon-spin'> </i> Working...");
this.getbin(function(b){0==b.success?(a.setOperationOutput("There was an error compiling."),a.eventManager.fire("verification_failed",b.message)):(a.eventManager.fire("mid_flash",b.size),1==a.pluginHandler.connected?(a.pluginHandler.disconnect(!1),setTimeout(function(){a.pluginHandler.doflash(!1,a.selectedBoard,a.selectedProgrammer,b.output,a.flash_callback)},200)):a.pluginHandler.doflash(!1,a.selectedBoard,a.selectedProgrammer,b.output,a.flash_callback))})}else this.setOperationOutput("Please select a valid port for the programmer!"),
this.eventManager.fire("plugin_notification","Please select a valid port for the programmer!")};this.getbin=function(a){var b=this.generate_payload("binary"),d=this;$.post("https://codebender.cc/utilities/compile/",b,function(b){try{var e=jQuery.parseJSON(b);a(e)}catch(g){d.setOperationOutput('<i class="icon-remove"></i> Unexpected error occurred. Try again later.'),d.eventManager.fire("verification_failed",'<i class="icon-remove"></i> Unexpected error occurred. Try again later.')}}).fail(function(){d.setOperationOutput("Connection to server failed.");
d.eventManager.fire("verification_failed","Connection to server failed.")})};this.verify=function(){var a=$("#cb_cf_boards option:selected").text();url="https://codebender.cc/utilities/logdb/47/VERIFY_META";url=url.replace("VERIFY_META",JSON.stringify({selectedBoard:a,tabID:this.pluginHandler.tabID}));$.get(url);this.eventManager.fire("pre_verify");this.setOperationOutput("<i class='icon-spinner icon-spin'> </i> Working...");var b=this;this.getbin(function(a){0==a.success?(b.setOperationOutput("Verification failed."),
b.eventManager.fire("verification_failed",a.message)):(b.setOperationOutput("Verification Successful"),b.eventManager.fire("verification_succeed",a.size))})};this.burn_bootloader=function(){if(this.pluginHandler.canBurnBootloader(this.selectedProgrammer)){var a;a="https://codebender.cc/utilities/logdb/25/UPLOAD_BOOTLOADER_META".replace("UPLOAD_BOOTLOADER_META",JSON.stringify({programmer:$("#programmer option:selected").val(),board:$("#cb_cf_boards option:selected").val(),port:$("#cb_cf_ports option:selected").val(),
bootloader_file:"undefined"===typeof this.selectedBoard.bootloader.file?"undefined":this.selectedBoard.bootloader.file}));$.get(a);this.setOperationOutput("<i class='icon-spinner icon-spin'></i> Working...");if("undefined"===typeof this.selectedBoard.bootloader.file)document.getElementById("plugin0").saveToHex(""),window.result=this.pluginHandler.doflashBootloader(this.selectedProgrammer,this.selectedBoard);else{var b=this;$.get("/bootloader/"+this.selectedBoard.bootloader.file.replace(".hex",".txt")).success(function(a){document.getElementById("plugin0").saveToHex(a);
window.result=b.pluginHandler.doflashBootloader(b.selectedProgrammer,b.selectedBoard)}).error(function(){b.setOperationOutput("The bootloader file was not found.")})}}else this.setOperationOutput("Please select a valid port!")};this.serial_monitor_disabled=!1;this.disableCompilerFlasherActions=function(){$("#cb_cf_boards").attr("disabled","disabled");$("#cb_cf_verify_btn").attr("disabled","disabled");compilerflasher.pluginHandler.plugin_running&&($("#cb_cf_ports").attr("disabled","disabled"),$("#cb_cf_flash_btn").attr("disabled",
"disabled"),$("#cb_cf_programmers").attr("disabled","disabled"),$("#cb_cf_flash_with_prog_btn").attr("disabled","disabled"),$("#cb_cf_baud_rates").attr("disabled","disabled"),$("#cb_cf_serial_monitor_connect").attr("disabled","disabled"),g.serial_monitor_disabled=!0)};this.enableCompilerFlasherActions=function(){$("#cb_cf_boards").removeAttr("disabled");$("#cb_cf_verify_btn").removeAttr("disabled");compilerflasher.pluginHandler.plugin_running&&($("#cb_cf_ports").removeAttr("disabled"),$("#cb_cf_flash_btn").removeAttr("disabled"),
$("#cb_cf_programmers").removeAttr("disabled"),$("#cb_cf_flash_with_prog_btn").removeAttr("disabled"),$("#cb_cf_baud_rates").removeAttr("disabled"),$("#cb_cf_serial_monitor_connect").removeAttr("disabled"),g.serial_monitor_disabled=!1)};this.on("pre_verify",this.disableCompilerFlasherActions);this.on("verification_succeed",this.enableCompilerFlasherActions);this.on("verification_failed",this.enableCompilerFlasherActions);this.on("pre_flash",this.disableCompilerFlasherActions);this.on("flash_failed",
this.enableCompilerFlasherActions);this.on("flash_succeed",this.enableCompilerFlasherActions);this.on("pre_hex",this.disableCompilerFlasherActions);this.on("hex_succeed",this.enableCompilerFlasherActions);this.on("hex_failed",this.enableCompilerFlasherActions)};
function boardsListCallback(e){compilerflasher.setBoardsList(e);$("#cb_cf_boards").find("option").remove().end();e=!1;if($("#cb_cf_boards").data().board)for(var g=0;g<compilerflasher.boards_list.length;g++)compilerflasher.boards_list[g].name==$("#cb_cf_boards").data().board&&(compilerflasher.selectedBoard=compilerflasher.boards_list[g],$("#cb_cf_boards").hide(),e=!0);if(!e){for(g=0;g<compilerflasher.boards_list.length;g++)$("#cb_cf_boards").append($("<option></option>").val(compilerflasher.boards_list[g].name).html(compilerflasher.boards_list[g].name));
compilerflasher.loadBoard();e=compilerflasher.getDefaultBoard();"undefined"!==e&&1==$("#cb_cf_boards option[value='"+e+"']").length&&($("#cb_cf_boards").val(e),compilerflasher.saveBoard());$("#cb_cf_boards").removeAttr("disabled")}}
function programmersListCallback(e){compilerflasher.programmers_list=e;$("#cb_cf_programmers").find("option").remove().end();for(e=0;e<compilerflasher.programmers_list.length;e++)$("#cb_cf_programmers").append($("<option></option>").val(compilerflasher.programmers_list[e].name).html(compilerflasher.programmers_list[e].name));compilerflasher.loadProgrammer()}function logging(){var e=generate_payload("binary",!0);$.post("/utilities/compile/",e,function(e){jQuery.parseJSON(e)})}
window.flashing_errors={1:"Could not connect to your device. Make sure that you have connected it properly, that you have selected the correct settings (device type and port) and try again.",256:"Could not connect to your device. Make sure that you have connected it properly, that you have selected the correct settings (device type and port) and try again.",259:"Could not program your device, the process timed out. Make sure that you have connected it properly, that you have selected the correct settings (device type and port) and try again.",
"-1":"Couldn\u2019t find an Arduino on the selected port. If you are using Leonardo check that you have the correct port selected. If it is correct, try pressing the board\u2019s reset button after initiating the upload","-2":"There was a problem programming your Arduino. If you are using a non-English Windows version, or username please contact us.","-204":"Could not program your device, the process timed out. Make sure that you have connected it properly, that you have selected the correct settings (device type and port) and try again.",
"-22":"The selected port seems to be in use. Please check your board connection, and make sure that you are not using it from some other application, you don't have an open serial monitor.","-23":"Another flashing process is still active. Please wait until it is done and try again.","-55":"The specified port might not be available. Please check if it is used by another application. If the problem persists, unplug your device and plug it again.","-56":"The specified port is in use or you do not have enough permissions to use the device. Please check if it is used by another application or correct its permissions.",
"-57":"The specified port might not be available. Please check if it is used by another application. If the problem persists, unplug your device and plug it again.",126:"Something seems to be wrong with the plugin installation. You need to install the plugin again.",127:"Something seems to be wrong with the plugin installation. You need to install the plugin again.","-200":"There was a problem during the flashing process. Please try again, or contact us if the problem persists.",100:"Could not connect to your device. Make sure that you have connected it properly, that you have selected the correct settings (device type and port) and try again.",
32001:"The selected port seems to be in use. Please make sure that you are not using it from some other program.",33005:"This baudrate is not supported by the operating system.",2001:"The selected port seems to be in use. Please make sure that you are not using it from some other program.",3005:"This baudrate is not supported by the operating system."};
(function(e){function g(a){return"object"==typeof a?a:{top:a,left:a}}var h=e.scrollTo=function(a,b,d){e(window).scrollTo(a,b,d)};h.defaults={axis:"xy",duration:1.3<=parseFloat(e.fn.jquery)?0:1,limit:!0};h.window=function(a){return e(window)._scrollable()};e.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==e.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var a=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||
"BackCo    mpat"==a.compatMode?a.body:a.documentElement})};e.fn.scrollTo=function(a,b,d){"object"==typeof b&&(d=b,b=0);"function"==typeof d&&(d={onAfter:d});"max"==a&&(a=9E9);d=e.extend({},h.defaults,d);b=b||d.duration;d.queue=d.queue&&1<d.axis.length;d.queue&&(b/=2);d.offset=g(d.offset);d.over=g(d.over);return this._scrollable().each(function(){function c(c){n.animate(k,b,d.easing,c&&function(){c.call(this,a,d)})}if(null!=a){var f=this,n=e(f),m=a,p,k={},t=n.is("html,body");switch(typeof m){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(m)){m=
g(m);break}m=e(m,this);if(!m.length)return;case "object":if(m.is||m.style)p=(m=e(m)).offset()}e.each(d.axis.split(""),function(a,b){var e="x"==b?"Left":"Top",g=e.toLowerCase(),l="scroll"+e,q=f[l],r=h.max(f,b);p?(k[l]=p[g]+(t?0:q-n.offset()[g]),d.margin&&(k[l]-=parseInt(m.css("margin"+e))||0,k[l]-=parseInt(m.css("border"+e+"Width"))||0),k[l]+=d.offset[g]||0,d.over[g]&&(k[l]+=m["x"==b?"width":"height"]()*d.over[g])):(e=m[g],k[l]=e.slice&&"%"==e.slice(-1)?parseFloat(e)/100*r:e);d.limit&&/^\d+$/.test(k[l])&&
(k[l]=0>=k[l]?0:Math.min(k[l],r));!a&&d.queue&&(q!=k[l]&&c(d.onAfterFirst),delete k[l])});c(d.onAfter)}}).end()};h.max=function(a,b){var d="x"==b?"Width":"Height",c="scroll"+d;if(!e(a).is("html,body"))return a[c]-e(a)[d.toLowerCase()]();var d="client"+d,f=a.ownerDocument.documentElement,g=a.ownerDocument.body;return Math.max(f[c],g[c])-Math.min(f[d],g[d])}})(jQuery);
